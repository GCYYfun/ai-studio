# æ•°æ®åº“ç®¡ç†æŒ‡å—

## æ•°æ®åº“å­˜å‚¨ä½ç½®

æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨çš„ **IndexedDB** ä¸­ï¼Œå…·ä½“ä½ç½®ï¼š

### ğŸ—„ï¸ æ•°æ®åº“ä¿¡æ¯
- **æ•°æ®åº“åç§°**: `InterviewSimDB`
- **ç‰ˆæœ¬**: `1`
- **å­˜å‚¨ä½ç½®**: æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼ˆæ¯ä¸ªåŸŸåç‹¬ç«‹ï¼‰
- **æ•°æ®è¡¨**:
  - `files` - ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆPDFã€TXTã€MDï¼‰
  - `interviews` - é¢è¯•è®°å½•
  - `analyses` - åˆ†æç»“æœ
  - `settings` - ç”¨æˆ·è®¾ç½®

### ğŸ“ æµè§ˆå™¨ä¸­çš„å®é™…ä½ç½®
- **Chrome**: `chrome://settings/content/all` â†’ æ‰¾åˆ°ä½ çš„ç½‘ç«™ â†’ å­˜å‚¨æ•°æ®
- **Firefox**: `about:preferences#privacy` â†’ ç®¡ç†æ•°æ® â†’ æ‰¾åˆ°ä½ çš„ç½‘ç«™
- **Safari**: å¼€å‘è€…å·¥å…· â†’ å­˜å‚¨ â†’ IndexedDB

## å¦‚ä½•æŸ¥çœ‹æ•°æ®åº“

### æ–¹æ³•1: æµè§ˆå™¨æ§åˆ¶å°ï¼ˆæ¨èï¼‰

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œè¾“å…¥ï¼š

```javascript
// æŸ¥çœ‹æ•°æ®åº“å®Œæ•´ä¿¡æ¯
await showDB()

// æŸ¥çœ‹å­˜å‚¨ä½¿ç”¨æƒ…å†µ
await storageUsage()

// æŸ¥çœ‹æ•°æ®åº“è¯¦ç»†çŠ¶æ€
await debugDatabase()
```

### æ–¹æ³•2: æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. æ‰¾åˆ° **Application** æˆ– **å­˜å‚¨** æ ‡ç­¾
3. å±•å¼€ **IndexedDB**
4. æ‰¾åˆ° `InterviewSimDB`
5. æŸ¥çœ‹å„ä¸ªæ•°æ®è¡¨

## å¦‚ä½•åˆ é™¤æ•°æ®

### ğŸ§¹ æ¸…é™¤ç‰¹å®šç±»å‹æ•°æ®

```javascript
// æ¸…é™¤æ‰€æœ‰ä¸Šä¼ çš„æ–‡ä»¶
await clearFiles()

// æ¸…é™¤æ‰€æœ‰é¢è¯•è®°å½•
await dbManager.clearAllInterviews()

// æ¸…é™¤æ‰€æœ‰åˆ†æç»“æœ
await dbManager.clearAllAnalyses()

// æ¸…é™¤æ‰€æœ‰è®¾ç½®
await dbManager.clearAllSettings()
```

### ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ•°æ®

```javascript
// æ¸…é™¤æ‰€æœ‰æ•°æ®ï¼ˆä¿ç•™æ•°æ®åº“ç»“æ„ï¼‰
await clearAllDB()
```

### âš ï¸ æ°¸ä¹…åˆ é™¤æ•´ä¸ªæ•°æ®åº“

```javascript
// æ°¸ä¹…åˆ é™¤æ•´ä¸ªæ•°æ®åº“ï¼ˆä¸å¯æ¢å¤ï¼ï¼‰
await deleteDB()
```

**æ³¨æ„**: `deleteDB()` ä¼šå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œç¡®ä¿ä½ çœŸçš„è¦åˆ é™¤ã€‚

## æ•°æ®å¤‡ä»½ä¸æ¢å¤

### ğŸ“¦ å¯¼å‡ºæ•°æ®å¤‡ä»½

```javascript
// å¯¼å‡ºæ‰€æœ‰æ•°æ®ä¸ºJSONæ–‡ä»¶
await exportDB()
```

è¿™ä¼šä¸‹è½½ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ•°æ®çš„JSONæ–‡ä»¶ï¼Œæ–‡ä»¶åæ ¼å¼ï¼š`interview-db-export-YYYY-MM-DD.json`

### ğŸ“Š æŸ¥çœ‹å­˜å‚¨ä½¿ç”¨æƒ…å†µ

```javascript
// æŸ¥çœ‹æµè§ˆå™¨å­˜å‚¨é…é¢å’Œä½¿ç”¨æƒ…å†µ
await storageUsage()
```

## å¸¸ç”¨ç®¡ç†å‘½ä»¤

### å¿«é€Ÿæ¸…ç†

```javascript
// æ¸…ç†æµ‹è¯•æ•°æ®
await cleanupTestData()

// æŸ¥çœ‹å½“å‰æœ‰å¤šå°‘æ–‡ä»¶
const info = await showDB()
console.log(`æ€»æ–‡ä»¶æ•°: ${info.storeDetails.find(s => s.name === 'files')?.count || 0}`)
```

### æ‰¹é‡æ“ä½œ

```javascript
// è·å–æ‰€æœ‰æ–‡ä»¶
const files = await fileManager.getFiles()
console.log('æ‰€æœ‰æ–‡ä»¶:', files)

// åˆ é™¤ç‰¹å®šæ–‡ä»¶
await fileManager.deleteFile('file_id_here')

// æœç´¢æ–‡ä»¶
const results = await fileManager.searchFiles('æœ±æ³½è¾‰')
console.log('æœç´¢ç»“æœ:', results)
```

## æµè§ˆå™¨å­˜å‚¨é™åˆ¶

### å­˜å‚¨é…é¢
- **Chrome**: é€šå¸¸æ˜¯ç¡¬ç›˜å¯ç”¨ç©ºé—´çš„80%
- **Firefox**: é»˜è®¤10GBï¼Œå¯é…ç½®
- **Safari**: 1GBå·¦å³

### æŸ¥çœ‹é…é¢ä½¿ç”¨
```javascript
await storageUsage()
// è¾“å‡ºç¤ºä¾‹:
// {
//   quota: 120000000000,      // æ€»é…é¢ (çº¦120GB)
//   usage: 50000000,          // å·²ä½¿ç”¨ (çº¦50MB)  
//   usagePercentage: "0.04"   // ä½¿ç”¨ç™¾åˆ†æ¯”
// }
```

## æ•…éšœæ’é™¤

### å¦‚æœæ•°æ®åº“æŸå

1. **å°è¯•æ¸…é™¤æ•°æ®**:
   ```javascript
   await clearAllDB()
   ```

2. **å¦‚æœæ¸…é™¤å¤±è´¥ï¼Œåˆ é™¤æ•´ä¸ªæ•°æ®åº“**:
   ```javascript
   await deleteDB()
   ```

3. **åˆ·æ–°é¡µé¢é‡æ–°åˆå§‹åŒ–**

### å¦‚æœå­˜å‚¨ç©ºé—´ä¸è¶³

1. **æŸ¥çœ‹ä½¿ç”¨æƒ…å†µ**:
   ```javascript
   await storageUsage()
   ```

2. **æ¸…ç†æ—§æ•°æ®**:
   ```javascript
   await clearFiles()  // æ¸…ç†æ–‡ä»¶
   await dbManager.clearAllAnalyses()  // æ¸…ç†åˆ†æç»“æœ
   ```

3. **å¯¼å‡ºé‡è¦æ•°æ®ååˆ é™¤æ•°æ®åº“**:
   ```javascript
   await exportDB()  // å…ˆå¤‡ä»½
   await deleteDB()  // å†åˆ é™¤
   ```

## éšç§è¯´æ˜

- æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨**ä½ çš„æµè§ˆå™¨æœ¬åœ°**
- **ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨**
- æ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šåˆ é™¤æ‰€æœ‰å­˜å‚¨çš„æ–‡ä»¶
- ä½¿ç”¨éšç§æ¨¡å¼/æ— ç—•æ¨¡å¼æ—¶æ•°æ®ä¸ä¼šæŒä¹…ä¿å­˜

## å¼€å‘è€…å·¥å…·

å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç®¡ç†å™¨å®ä¾‹ï¼š

```javascript
// ç›´æ¥è®¿é—®æœåŠ¡å®ä¾‹
fileManager     // æ–‡ä»¶ç®¡ç†å™¨
selector        // æ–‡ä»¶é€‰æ‹©å™¨  
dbManager       // æ•°æ®åº“ç®¡ç†å™¨

// é«˜çº§æ“ä½œ
await dbManager.exportAllData()  // è·å–åŸå§‹å¯¼å‡ºæ•°æ®
await dbManager.getDatabaseInfo()  // è·å–è¯¦ç»†æ•°æ®åº“ä¿¡æ¯
```

---

**æ€»ç»“**: æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨çš„IndexedDBä¸­ï¼Œä½¿ç”¨æ§åˆ¶å°å‘½ä»¤å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹ã€æ¸…ç†å’Œç®¡ç†æ‰€æœ‰æ•°æ®ã€‚æœ€ç®€å•çš„æ°¸ä¹…åˆ é™¤æ–¹æ³•æ˜¯åœ¨æ§åˆ¶å°è¿è¡Œ `await deleteDB()`ã€‚